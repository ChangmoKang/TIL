# OS가 보이는 그림책

![OS가 보이는 그림책](https://image.aladin.co.kr/product/16671/58/cover500/8931555792_1.jpg)

[알라딘 구매링크](<https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=166715851>), [교보문고 구매링크](<http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&mallGb=KOR&barcode=9788931555790&orderClick=LEa&Kc=>)



## 구매 이유와 계획

### 구매이유

![제발 계획대로 해보자](http://static.ebs.co.kr/images/bhp/public/images/2019/10/6/11/9/22/7269180a-3efa-4a5f-834f-fc1aa947d872.jpg)

~~정말 쉽게 OS를 접근해 볼 수 있을 것 같아서 구매해보았습니다.~~



### 계획

오후 10시에 'OS 책 읽자' 빅스비 리마인더를 설정하여서 아래의 계획대로 해보려고 합니다.

하루(Day)에 한 챕터를 읽고 다음 날(Day + 1)에 다시 읽은 후 여기에 정리할 것입니다.



1. ~~`19. 11. 29  - 1장 OS의 기능~~
2. ~~`19. 11. 30  - 2장 CPU와 프로세스~~
3. `19. 12. 1 - 3장 메모리 관리
4. `19. 12. 2 - 4장 디스크 관리
5. `19. 12. 3 - 5장 네트워크 관리
6. `19. 12. 4 - 6장 Windows
7. `19. 12. 5 - 7장 Linux
8. `19. 12. 6 - 8장 Mac OS와 기타 OS



## 1장  OS의 기능 (`19. 11. 30)

### 컴퓨터의 기동

부팅(booting): 컴퓨터의 전원을 넣은 후부터 OS가 기동되기까지 자동으로 처리되는 흐름

1. 컴퓨터의 전원을 넣는다
2. BIOS 기동
3. 부팅로더 기동
   * 부팅로더: 하드디스크상에 있는 OS를 기동시키기 위한 프로그램
   * 하드디스크에 있는 MBR(Master Boot Record)이라는 영역으로부터 실행됨
4. OS 기동



### BIOS(Basic Input/Output System)

컴퓨터에 접속되어 있는 기기를 제어하는 프로그램군으로, OS를 기동시키기 전에 메모리나 하드웨어 등을 체크함



### 커널(kernel)과 쉘(Shell)

커널: 사용자의 조작을 처리하여 OS가 움직일 수 있도록 지시하는 부분. (사용자에게 보이지 않음)

시스템 콜: 커널이 쉘과 같은 프로그램에게 제공하는 기능

* 프로그램은 커널에게 처리를 의뢰하고 실제 처리는 커널이 수행



쉘: 키보드 입력과 같은 사용자 조작을 커널에게 전달 (사용자에게 보이는 부분)

쉘의 기본 기능

* 배치 처리: 일괄 처리를 실행
* 히스토리 기능: 입력 이력을 기억함
* alias 기능: 파일에 별명을 붙임
* 잡 컨트롤: 프로그램의 실행이나 정지를 수행함
* 리다이렉트/파이프: 결과의 출력처를 변경함
* 와일드카드 전개: 여러 개의 파일에 동일한 처리를 수행함

쉘 인터페이스

* CUI(Character User Interface)
* GUI(Graphic User Interface)



### I/O 포트

I/O 주소 공간: 디바이스에 대한 명령이나 데이터 송수신에 사용되는 메모리 안의 영역

> 각 디바이스에 할당된 주소를 'I/O 포트 주소'라고 함



I/O 주소 방식: I/O 주소 공간에 명령이나 데이터를 써 넣음으로써 디바이스를 제어하는 것



### 기억 장치

레지스터: CPU 안에 있는 일시적인 기억 장치. CPU가 연산한 결과를 저장함

* Cache: 자주 사용하는 명령을 CPU안에 넣어두고 고속으로 처리하는 것

내부 기억(메인 메모리): CPU가 직접 제어할 수 있는 메모리. 프로그램이나 데이터를 메모리에 저장함

외부 기억: 하드디스크와 같은 데이터를 저장해 두는 장치

> 속도 : 레지스터(가장 빠름) > 캐시 메모리 > 메인 메모리 > 하드디스크(가장 느림)



### +

* 미들웨어: OS와 애플리케이션 사이에서 데이터를 주고받을 수 있도록 중개하는 소프트웨어
* API: OS나 프로그래밍 언어가 제공하는 기능을 애플리케이션에서 사용할 수 있도록 만든 인터페이스



## 2장 CPU와 프로세스 (`19. 12. 1)

### 잡(Job)과 태스트(Task)

잡: 사용자의 입장에서 보았을 때 컴퓨터에게 시키는 일의 단위

태스크: OS 입장에서 본 작업 단위



#### 잡 관리

OS는 잡의 실행 순서와 잡이 정상적으로 처리되고 있는지를 관리하고

잡을 작게 나눈 처리 단위를 '잡 스텝'이라고 함



#### 잡과 태스크의 관계

* 잡
  * 잡 스텝 A
  * 잡 스텝 B
    * 태스크 A
    * 태스크 B
    * 태스크 C
  * 잡 스텝 C





### 스루풋(Throughtput)

스루풋: OS의 단위 시간당 처리 능력



#### 리스폰스 타임과 턴어라운드 타임

* 턴어라운드 타임: CPU의 처리 시간 + 입출력시간
  * 리스폰스 타임: CPU의 처리 시간



#### 스풀(Spool)

스풀: CPU로부터 입출력 장치로 가는 명령을 메모리와 같이 비교적 고속인 기억 장치에 일시적으로 저장하는 것





### 인터럽트(Interrupt)

인터럽트: 실행 중인 프로그램을 중단하고 우선순위가 높은 다른 프로그램에게 CPU를 할당하여 실행하는 것

(중단된 처리 내용은 메모리에 일시적으로 저장됨)

(내부 인터럽트와 외부 인터럽트가 존재함)



#### 내부 인터럽트

* 프로그램 인터럽트
  * 오버플로어로 인해 쓰기가 허가되지 않은 메모리 영역에 액세스했을 때
  * 무효한 메모리를 참조할 때
  * 디버그를 위해 프로그램을 한 명령씩 실행할 때
  * 시스템 콜을 실행할 때
  * 무효한 명령을 실행할 때



#### 외부 인터럽트

* 기계 체크 인터럽트: 전원 이상이나 하드웨어에 장애가 발생했을 때(**인터럽트 중에서 가장 우선**)
* 타이머 인터럽트: 일정 시간 또는 일정 시간마다 하드웨어로부터 발생하는 인터럽트
* 입출력 인터럽트: 주변 기기의 입출력 동작이 완료되었을 때와 같이 상태가 변화했을 때
* 콘솔 인터럽트: 사용자가 키보드와 같은 입출력 장치를 조작할 때





### 프로세스(Process)

사용자가 프로그램을 실행하면 OS는 그 내용을 메모리상으로 읽어들여 처리를 실행하는데

이때, 메모리상에 할당된 프로그램을 ***프로세스***라고 한다.



여러 개의 태스크(프로세스)가 병행하여 작동하는 것을 '멀티태스킹'이라고 함





### 프로세스 관리

프로세스에는 '대기 상태', '실행 가능 상태', '실행 상태' 세 가지 상태가 존재함

> 대기상태 > (입출력 인터럽트) > 실행 가능 상태 > (디스패치) > 실행 상태 > (프리엠션) > 실행 가능 상태



#### 디스패치와 프리엠션

디스패치: OS가 가장 우선순위가 높은 실행 가능 상태의 프로세스에 대해 CPU의 사용 권한을 할당하는 것

프리엠션: 인터럽트에 의해 CPU의 할당을 해제하는 것





### 멀티태스킹의 종류

#### 프리엠티브

OS가 실행 가능 상태인 태스크에게 CPU의 사용권을 할당하고 강제적으로 태스크를 전환하여 관리하는 것



#### 논프리엠티브

실행 중인 태스크가 처리를 수행하지 않는 시간을 자발적으로 해제함으로써 다른 태스크와 동시에 실행할 수 있도록 하는 것





### 프로세스 제어

#### 프로그램 상태어(PSW: Program Status Word)

인터럽트로 인해 중단된 프로그램의 상태나 연산의 종료 상태를 저장해 두는 레지스터



#### 프로세스 제어 블럭(PCB: Process Control Block)

각 프로세스의 CPU 상태나 프로세스의 상태를 저장해 두는 메모리 영역



#### 컨텍스트 스위치

인터럽트로 인해 프로세스를 전환할 때 OS가 컨텍스틀르 PCB에 저장하고 복원하는 것





### 스케줄링(Scheduling)

OS가 여러 개의 프로세스를 처리할 때 CPU를 할당할 순서를 정하는 것



#### 스케줄링의 종류

* 라운드 로빈 방식(Round Robin Scheduling)

  > 프로세스가 기다리고 있는 순서대로 일정 시간씩 CPU를 할당해서 시간이 초과한 프로세스를 맨 마지막으로 돌리는 방식

* 우선순위 방식

  > OS가 프로세스의 우선순위를 정해서 우선순위가 높은 프로세스부터 실행해 나가는 방식





### 프로세스의 분기

#### fork와 exec

UNIX 계열 OS에서 시스템 콜에 의해 프로세스를 복사하는 것을 'fork'라고 한다.

복사되는 쪽을 '부모 프로세스', 복사된 쪽을 '자식 프로세스'라고 할 때, 자식 프로세스에서 다른 프로그램을 실행하도록 지시하는 것을 'exec'라고 한다.



#### wait

자식 프로세스의 처리가 끝나면 부모 프로세스에게 신호가 보내지므로 이것을 기다림으로써 부모는 자식 프로세스의 종료까지 대기할 수 있다. 그후에 wait 시스템 콜에 의해 자식 프로세스에게 마련되었던 PCB와 메모리가 제거 됨.





### 프로세스의 동기

#### 배타 제어

여러 개의 프로세스가 파일이나 데이터베이스에 동시에 액세스하면 데이터의 무결성이 손상될 수 있는데, 처리가 끝날 때까지 하나의 프로세스에게 자원을 독점시키는 것



#### 세마포(Semaphore)

정해진 수 이상의 프로세스가 공유 자원에 동시 액세스하지 않도록 카운터를 사용하여 제어하는 장치

> P(획득)조작과 V(해제)조작으로 '통행 가능', '통행 불가'와 같은 두 가지 상태를 관리함





### 데드락(Dead lock)

2개의 프로세스가 공유 자원을 잠근 채로 서로의 공유 자원에 액세스하려고 하면 양쪽 프로세스가 모두 영구적으로 대기 상태



#### 뮤텍스

세마포의 카운터 초기값이 1인 경우





### 프로세스 간 통신

UNIX 계열 OS를 예로 프로세스 간 통신의 종류

* 메세지 큐
* 파이프
* 이름 붙은 파이프





### 공유 메모리와 스레드

공유 메모리: 여러 개의 프로세스에서 공통으로 사용할 수 있는 메모리 영역(시스템 콜에 의해 작성됨)



스레드: 프로세스 안의 프로그램 실행의 흐름

> 스레드는 분기가 가능해서 여러 개의 스레드를 동시에 실행할 수 있습니다.



#### 스레드와 프로세스의 차이

스레드가 프로세스를 동시에 여러 개 실행하는 것과 다른 점은 동일한 프로세스의 스레드는 같은 메모리 공간을 참조한다. 스레드는 CPU를 사용하는 최소 단위이다